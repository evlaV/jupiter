From 3008cf7d21483456c4ed80727c3102a45e8a9fe0 Mon Sep 17 00:00:00 2001
From: Julian Bouzas <julian.bouzas@collabora.com>
Date: Mon, 16 Jun 2025 17:35:08 -0400
Subject: [PATCH 3/6] monitor: alsa: Forward the
 'session.suspend-timeout-seconds' property to loopback device

---
 src/scripts/monitors/alsa.lua | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/scripts/monitors/alsa.lua b/src/scripts/monitors/alsa.lua
index 2a5776cc..8bb0bcce 100644
--- a/src/scripts/monitors/alsa.lua
+++ b/src/scripts/monitors/alsa.lua
@@ -47,6 +47,7 @@ function CreateLoopback (properties)
   local pri_driver = properties ["priority.driver"]
   local pri_session = properties ["priority.session"]
   local cpd = properties ["card.profile.device"]
+  local sts = properties ["session.suspend-timeout-seconds"]
   local stream_media_class = nil
   local stream_props = nil
   local device_props = nil
@@ -89,7 +90,8 @@ function CreateLoopback (properties)
     ["device.id"] = dev_id,
     ["card.profile.device"] = cpd,
     ["priority.driver"] = tonumber(pri_driver) + 1,
-    ["priority.session"] = tonumber(pri_session) + 1
+    ["priority.session"] = tonumber(pri_session) + 1,
+    ["session.suspend-timeout-seconds"] = sts
   }
 
   -- Set args
-- 
2.52.0

