From cf0de8f86d59bb87d4c4c683b797a81bfb273cd0 Mon Sep 17 00:00:00 2001
From: Wim Taymans <wtaymans@redhat.com>
Date: Fri, 19 Sep 2025 16:16:25 +0200
Subject: [PATCH 6/8] timer: fix compilation on arm

---
 src/pipewire/timer-queue.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/src/pipewire/timer-queue.c b/src/pipewire/timer-queue.c
index 8f2948597..f40c44bf6 100644
--- a/src/pipewire/timer-queue.c
+++ b/src/pipewire/timer-queue.c
@@ -27,8 +27,8 @@ static void rearm_timer(struct pw_timer_queue *queue)
 	}
 	if (timeout != queue->next_timeout) {
 		if (timeout)
-			pw_log_debug("%p: arming with timeout %ld.%09ld", queue,
-				     timeout->tv_sec, timeout->tv_nsec);
+			pw_log_debug("%p: arming with timeout %"PRIi64, queue,
+				     (int64_t)SPA_TIMESPEC_TO_NSEC(timeout));
 		else
 			pw_log_debug("%p: disarming (no entries)", queue);
 
@@ -162,8 +162,9 @@ int pw_timer_queue_add(struct pw_timer_queue *queue, struct pw_timer *timer,
 	timer->callback = callback;
 	timer->data = data;
 
-	pw_log_debug("%p: adding timer %p with timeout %ld.%09ld",
-		     queue, timer, timeout.tv_sec, timeout.tv_nsec);
+	pw_log_debug("%p: adding timer %p with timeout %"PRIi64,
+		     queue, timer, (int64_t)SPA_TIMESPEC_TO_NSEC(&timeout));
+
 
 	/* Insert timer in sorted order (earliest timeout first) */
 	spa_list_for_each(iter, &queue->entries, link) {
-- 
2.51.0

